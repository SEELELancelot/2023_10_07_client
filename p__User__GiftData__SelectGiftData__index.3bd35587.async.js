"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[83],{43325:function(K,x,t){t.r(x),t.d(x,{default:function(){return re}});var S=t(97857),b=t.n(S),J=t(15009),d=t.n(J),Q=t(99289),A=t.n(Q),X=t(5574),j=t.n(X),Y=t(5914),y=t(1414),q=t(71230),p=t(15746),z=t(96365),_=t(34041),G=t(15867),ee=t(73014),c=t(67294),D=t(67862),e=t(85893),te=function(w){return(0,c.useEffect)(function(){}),(0,e.jsx)("div",{children:(0,e.jsx)("div",{style:{textAlign:"center"},children:(0,e.jsx)(G.ZP,{type:"primary",onClick:A()(d()().mark(function I(){var f,M,m,C,Z,E,B;return d()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return console.log(w.checkData),f=[],w.checkData.map(function(v,N){var P=v.customer_id,F=v.giftContent.id;f.push([P,F])}),console.log(f),h.next=6,(0,D.iw)({gift:f});case 6:M=h.sent,m=M.data,C=m.success,Z=m.message,E=m.addArray,B=m.notAddArray,console.log(C,Z),console.log("addArray",E),console.log("notAddArray",B);case 11:case"end":return h.stop()}},I)})),children:"\u9001\u51FA"})})})},ae=te,ve=t(27484),ne=function(){var w=(0,c.useState)([]),I=j()(w,2),f=I[0],M=I[1],m=(0,c.useState)([]),C=j()(m,2),Z=C[0],E=C[1],B=(0,c.useState)(!1),L=j()(B,2),h=L[0],v=L[1],N=(0,c.useState)(!0),P=j()(N,2),F=P[0],le=P[1],oe=(0,c.useState)([]),V=j()(oe,2),de=V[0],ue=V[1];(0,c.useEffect)(function(){ie()},[]);var ie=function(){var r=A()(d()().mark(function a(){var n,s,g,l,o;return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,D.Ab)();case 2:for(n=u.sent,s=n.data,g=s.success,l=s.data,o=0;o<l.length;o++)l[o].value=l[o].location_id,l[o].label=l[o].location_name;l.unshift({value:"",label:"\u5168\u90E8"}),ue(l);case 7:case"end":return u.stop()}},a)}));return function(){return r.apply(this,arguments)}}(),ce=function(){var r=A()(d()().mark(function a(n){var s,g,l,o,R,u,W,T,U,O,k,H;return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return s=n.start_date,g=n.end_date,l=n.department,o=s==null?void 0:s.replace("/","-"),R=g==null?void 0:g.replace("/","-"),console.log(n),console.log(l.value),u={start_date:o,end_date:R,department:l.value},i.next=8,(0,D.Ml)(u);case 8:if(W=i.sent,T=W.data,U=T.success,O=T.message,console.log(U,O),U!==1){i.next=18;break}return i.next=14,(0,D._5)();case 14:k=i.sent,H=O.map(function($,xe){return $.giftContent=k.data[0],$.timeStamp=Date.now(),$}),E(H),le(!1);case 18:case"end":return i.stop()}},a)}));return function(n){return r.apply(this,arguments)}}(),fe=[{title:"\u8EAB\u5206\u8B49",dataIndex:"customer_id",render:function(a){return a}},{title:"\u59D3\u540D",dataIndex:"customer_name"},{title:"\u96FB\u8A71",dataIndex:"customer_tel"},{title:"\u624B\u6A5F",dataIndex:"customer_cel"},{title:"\u751F\u65E5",dataIndex:"customer_birthday",render:function(a){return new Date(a).toLocaleDateString()}},{title:"\u9001\u79AE\u5167\u5BB9",render:function(a){return(0,e.jsx)("div",{children:a.giftContent.default_birthday_name})}}],me={onChange:function(a,n){M(n)},onSelect:function(a,n,s){},onSelectAll:function(a,n,s){console.log(a,n,s)},getCheckboxProps:function(a){}},he=function(a,n,s,g){};return(0,e.jsxs)("div",{children:[(0,e.jsx)(Y.Z,{title:"\u5132\u5B58".concat(f.length,"\u7B46\u8CC7\u6599"),centered:!0,open:h,footer:null,onOk:function(){return v(!1)},onCancel:function(){return v(!1)},width:900,children:(0,e.jsx)(ae,{checkData:f,setNewinsertGiftModal:v})}),(0,e.jsx)(y.Z,{name:"selectTime",onFinish:ce,style:{},children:(0,e.jsxs)(q.Z,{justify:"center",gutter:[40,16],children:[(0,e.jsx)(p.Z,{xs:24,sm:24,md:8,lg:8,xl:6,children:(0,e.jsx)(y.Z.Item,{name:"start_date",label:"\u958B\u59CB\u65E5\u671F",rules:[{message:"\u8ACB\u8F38\u5165\u958B\u59CB\u65E5\u671F"}],children:(0,e.jsx)(z.Z,{})})}),(0,e.jsx)(p.Z,{xs:24,sm:24,md:8,lg:8,xl:6,children:(0,e.jsx)(y.Z.Item,{name:"end_date",label:"\u7D50\u675F\u65E5\u671F",rules:[{message:"\u8ACB\u8F38\u5165\u7D50\u675F\u65E5\u671F"}],children:(0,e.jsx)(z.Z,{})})}),(0,e.jsx)(p.Z,{xs:24,sm:24,md:8,lg:8,xl:6,children:(0,e.jsx)(y.Z.Item,{label:"\u5206\u90E8",name:"department",initialValue:"\u5168\u90E8",children:(0,e.jsx)(_.default,{options:de,showSearch:!1,labelInValue:!0})})}),(0,e.jsx)(p.Z,{xs:24,sm:24,md:6,lg:6,xl:4,children:(0,e.jsx)(y.Z.Item,{wrapperCol:{offset:2},children:(0,e.jsx)(G.ZP,{type:"primary",htmlType:"submit",children:"\u641C\u5C0B"})})}),(0,e.jsx)(p.Z,{xs:24,sm:24,md:2,lg:2,xl:2,children:F?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("span",{children:[Z.length,"\u7B46"]})})]})}),F?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("div",{children:[(0,e.jsx)(ee.Z,{columns:fe,dataSource:Z,onChange:he,onRow:function(a,n){return{}},rowKey:function(a){return a.customer_id},pagination:{pageSizeOptions:["10","20","30","40"],showSizeChanger:!0,defaultPageSize:10,defaultCurrent:1},rowSelection:b()({},me),rowClassName:function(a,n){}}),(0,e.jsx)("div",{style:{textAlign:"center"},children:(0,e.jsx)(G.ZP,{type:"primary",onClick:A()(d()().mark(function r(){return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v(!0);case 2:case"end":return n.stop()}},r)})),children:"\u9EDE\u9078\u5132\u5B58"})})]})]})},re=ne},15746:function(K,x,t){var S=t(21584);x.Z=S.Z},71230:function(K,x,t){var S=t(92820);x.Z=S.Z}}]);
