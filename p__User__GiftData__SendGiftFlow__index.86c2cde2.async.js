"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[144],{76363:function(fe,b,r){r.r(b),r.d(b,{default:function(){return _}});var $=r(11941),H=r(97857),K=r.n(H),L=r(15009),v=r.n(L),E=r(99289),A=r.n(E),O=r(5574),g=r.n(O),x=r(1414),h=r(55742),V=r(73014),B=r(15867),m=r(67294),F=r(67862),n=r(85893),z=function(){var j=(0,m.useState)(!0),S=g()(j,2),k=S[0],G=S[1],ee=(0,m.useState)([]),D=g()(ee,2),ne=D[0],te=D[1],re=(0,m.useState)([]),I=g()(re,2),u=I[0],ae=I[1],se=x.Z.useForm(),ie=g()(se,1),P=ie[0],de=[{title:"\u8EAB\u5206\u8B49",dataIndex:"customer_id",key:"customer_id",render:function(e){return(0,n.jsx)("div",{children:e})}},{title:"\u59D3\u540D",dataIndex:"customer_name",key:"customer_name",render:function(e){return(0,n.jsx)("div",{children:e})}},{title:"\u96FB\u8A71",dataIndex:"customer_tel",key:"customer_tel",render:function(e){return(0,n.jsx)("div",{children:e})}},{title:"\u624B\u6A5F",dataIndex:"customer_cel",key:"customer_cel",render:function(e){return(0,n.jsx)("div",{children:e})}},{title:"\u751F\u65E5",dataIndex:"customer_birthday",key:"customer_birthday",render:function(e){return new Date(e).toLocaleDateString()},sorter:function(e,a){var d=new Date(e.customer_birthday).toLocaleDateString(),i=new Date(a.customer_birthday).toLocaleDateString(),o=d.substring(d.indexOf("/")+1),c=i.substring(i.indexOf("/")+1);return new Date(o).getTime()-new Date(c).getTime()}},{title:"\u79AE\u7269",dataIndex:"default_birthday_name",key:"default_birthday_name",render:function(e){return(0,n.jsx)("div",{children:e})}},{title:"\u9001\u79AE\u65B9\u5F0F",dataIndex:"",key:"",render:function(e){return(0,n.jsx)("div",{children:(0,n.jsx)(x.Z.Item,{name:"".concat(e.birthday_gift_state_id,"-sendMethod"),initialValue:"1",children:(0,n.jsxs)(h.ZP.Group,{children:[(0,n.jsx)(h.ZP,{value:"1",children:"\u90F5\u5BC4"}),(0,n.jsx)(h.ZP,{value:"2",children:" \u89AA\u9001 "}),(0,n.jsx)(h.ZP,{value:"3",children:" \u4EE3\u70BA\u8F49\u9001 "}),(0,n.jsx)(h.ZP,{value:"4",children:" \u4E0D\u9001 "})]})})})}}];(0,m.useEffect)(function(){Z()},[]);var Z=function(){var t=A()(v()().mark(function e(){var a,d,i,o;return v()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,F.Rm)();case 2:a=l.sent,console.log(a),d=a.data,i=d.success,o=d.message,G(!1),te(o);case 7:case"end":return l.stop()}},e)}));return function(){return t.apply(this,arguments)}}(),le=function(){var t=A()(v()().mark(function e(){var a,d,i,o,c,l,R,p,f,w,U,C,T,ce;return v()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:console.log(u),a=P.getFieldsValue(!0),d=[],i=0;case 4:if(!(i<u.length)){s.next=22;break}o=u[i].birthday_gift_state_id,c=[],s.t0=v()().keys(a);case 8:if((s.t1=s.t0()).done){s.next=19;break}if(l=s.t1.value,R=l.split("-")[0],p=l.split("-")[1],f=a[l],o!==parseInt(R)){s.next=17;break}return parseInt(f)===4?(u[i].birthday_gift_state="4",u[i][p]=f,c.push("4",f,o)):(u[i].birthday_gift_state="1",u[i][p]=f,c.push("1",f,o)),d.push(c),s.abrupt("break",19);case 17:s.next=8;break;case 19:i++,s.next=4;break;case 22:return w={updateGift:d},console.log(w),s.next=26,(0,F.wA)(w);case 26:U=s.sent,C=U.data,T=C.success,ce=C.message,T===1&&(console.log("\u66F4\u65B0\u6210\u529F"),Z());case 29:case"end":return s.stop()}},e)}));return function(){return t.apply(this,arguments)}}(),oe={onChange:function(e,a){console.log("selectedRows: ",a),ae(a)},onSelect:function(e,a,d){},onSelectAll:function(e,a,d){},getCheckboxProps:function(e){}},ue=function(e,a,d,i){};return(0,n.jsx)("div",{children:k?(0,n.jsx)(n.Fragment,{}):(0,n.jsxs)("div",{children:[(0,n.jsx)(x.Z,{name:"sendGift",form:P,children:(0,n.jsx)(V.Z,{columns:de,dataSource:ne,onChange:ue,onRow:function(e,a){return{}},rowKey:function(e){return e.customer_id},pagination:{pageSizeOptions:["10","20","30","40"],showSizeChanger:!0},rowSelection:K()({},oe),rowClassName:function(e,a){}})}),(0,n.jsx)("div",{style:{textAlign:"center"},children:(0,n.jsx)(B.ZP,{onClick:le,type:"primary",children:"\u5132\u5B58"})})]})})},M=z,N=function(){return(0,n.jsx)("div",{children:"2"})},J=N,Q=function(){return(0,n.jsx)("div",{children:"Send"})},W=Q,X=function(){return(0,n.jsx)("div",{children:"3"})},Y=X,q=function(){var j=function(G){console.log(G)},S=[{key:"1",label:"\u6E96\u5099\u9001\u79AE",children:(0,n.jsx)(M,{})},{key:"2",label:"\u9001\u79AE\u65B9\u5F0F",children:(0,n.jsx)(J,{})},{key:"3",label:"\u9001\u79AE\u4E2D",children:(0,n.jsx)(W,{})},{key:"4",label:"\u7121\u6CD5\u9001\u79AE",children:(0,n.jsx)(Y,{})}];return(0,n.jsx)("div",{children:(0,n.jsx)($.Z,{defaultActiveKey:"1",items:S,onChange:j,destroyInactiveTabPane:!0})})},_=q}}]);
